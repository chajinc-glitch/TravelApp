<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>떠나자 - 여행 테마</title>
  <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Arial', sans-serif; margin: 0; background: #f8f9fa; }
    header { position: sticky; top: 0; z-index: 1000; background: rgba(255,255,255,0.9); backdrop-filter: blur(8px); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .navbar { display: flex; justify-content: space-between; align-items: center; padding: 15px 60px; }
    .logo { font-family: 'Gaegu', cursive; font-size: 36px; color: #00aaff; cursor: pointer; transition: transform 0.2s; }
    .logo:hover { transform: scale(1.05); }
    .nav-links { list-style: none; display: flex; gap: 30px; margin: 0; padding: 0; }
    .nav-links li a { text-decoration: none; color: #333; font-weight: bold; font-size: 18px; transition: color 0.2s; }
    .nav-links li a:hover { color: #00aaff; }
    .container { width: 80%; max-width: 1000px; margin: 50px auto; display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
    .theme-card { background: white; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); padding: 20px; text-align: center; cursor: pointer; transition: transform 0.2s, border 0.2s; }
    .theme-card:hover { transform: scale(1.05); }
    .theme-card img { width: 100%; height: 150px; object-fit: cover; border-radius: 10px; margin-bottom: 10px; }
    .theme-card h3 { margin: 0; font-size: 1.2rem; color: #333; }
    .theme-card.selected { border: 3px solid #00aaff; }
    .recommend-btn { display: block; width: 200px; margin: 40px auto; padding: 15px 0; font-size: 18px; font-weight: bold; color: white; background-color: #00aaff; border: none; border-radius: 10px; cursor: pointer; transition: background-color 0.2s, transform 0.2s; }
    .recommend-btn:hover { background-color: #0088cc; transform: scale(1.05); }
    .recommendations { width: 80%; max-width: 1000px; margin: 40px auto; display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
    .rec-card { background: white; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); text-align: center; padding: 15px; }
    .rec-card img { width: 100%; height: 150px; object-fit: cover; border-radius: 10px; }
    .rec-card h4 { margin: 10px 0 0 0; font-size: 1rem; color: #333; }
  </style>
</head>
<body>

<header>
  <nav class="navbar">
    <div class="logo" onclick="location.href='/'">떠나자</div>
    <ul class="nav-links">
      <li><a href="/">홈</a></li>
      <li><a href="/theme">테마</a></li>
      <li><a href="#region">지역</a></li>
      <li><a href="#flight">항공</a></li>
      <li><a href="#hotel">숙소</a></li>
    </ul>
  </nav>
</header>

<h1 style="text-align:center; margin-top:40px; font-family:'Gaegu', cursive; font-size:48px;">여행 테마 선택</h1>

<div class="container">
  <div class="theme-card" data-theme="관광">
    <img src="https://images.unsplash.com/photo-1519922639192-e73293ca430e?ixlib=rb-4.1.0&auto=format&fit=crop&w=1172&q=80" alt="관광">
    <h3>관광</h3>
  </div>
  <div class="theme-card" data-theme="휴양">
    <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=400&q=60" alt="휴양">
    <h3>휴양</h3>
  </div>
  <div class="theme-card" data-theme="문화">
    <img src="https://images.unsplash.com/photo-1543906965-f9520aa2ed8a?auto=format&fit=crop&w=1170&q=80" alt="문화">
    <h3>문화</h3>
  </div>
  <div class="theme-card" data-theme="음식">
    <img src="https://images.unsplash.com/photo-1600891964599-f61ba0e24092?auto=format&fit=crop&w=400&q=60" alt="음식">
    <h3>음식</h3>
  </div>
  <div class="theme-card" data-theme="모험">
    <img src="https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=400&q=60" alt="모험">
    <h3>모험</h3>
  </div>
  <div class="theme-card" data-theme="자연">
    <img src="https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?auto=format&fit=crop&w=1274&q=80" alt="자연">
    <h3>자연</h3>
  </div>
  <div class="theme-card" data-theme="쇼핑">
    <img src="https://images.unsplash.com/photo-1481437156560-3205f6a55735?auto=format&fit=crop&w=1195&q=80" alt="쇼핑">
    <h3>쇼핑</h3>
  </div>
  <div class="theme-card" data-theme="힐링">
    <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=60" alt="힐링">
    <h3>힐링</h3>
  </div>
</div>

<button class="recommend-btn">추천받기</button>

<div class="recommendations"></div>

<script>
const cards = document.querySelectorAll('.theme-card');
const recommendBtn = document.querySelector('.recommend-btn');
const recommendationsDiv = document.querySelector('.recommendations');
let selectedTheme = null;

// 테마 카드 선택
cards.forEach(card => {
  card.addEventListener('click', () => {
    cards.forEach(c => c.classList.remove('selected'));
    card.classList.add('selected');
    selectedTheme = card.dataset.theme;
  });
});

// 추천 버튼 클릭
recommendBtn.addEventListener('click', async () => {
  if(!selectedTheme){
    alert('먼저 테마를 선택해주세요!');
    return;
  }

  recommendationsDiv.innerHTML = '<p>추천 여행지 불러오는 중...</p>';

  try {
    const res = await fetch("/recommend", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ theme: selectedTheme })
    });

    const data = await res.json();
    recommendationsDiv.innerHTML = '';

    if(!Array.isArray(data) || data.length === 0){
      recommendationsDiv.innerHTML = '<p>추천 여행지를 찾을 수 없습니다 😢</p>';
      return;
    }

    data.forEach(place => {
      const card = document.createElement('div');
      card.className = 'rec-card';
      card.innerHTML = `
        <img src="${place.image}" alt="${place.name}">
        <h4>${place.name}</h4>
        <p>${place.description}</p>
      `;
      recommendationsDiv.appendChild(card);
    });

  } catch (err) {
    recommendationsDiv.innerHTML = '<p>추천 여행지 불러오기 실패 😢</p>';
    console.error(err);
  }
});
</script>

</body>
</html>
