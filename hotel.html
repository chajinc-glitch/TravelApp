<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>떠나자 - 호텔 검색</title>
  <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Arial', sans-serif; margin: 0; background: #f8f9fa; }
    
    /* 헤더 */
    header {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(8px);
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .navbar { display: flex; justify-content: space-between; align-items: center; padding: 15px 60px; }
    .logo { font-family: 'Gaegu', cursive; font-size: 36px; color: #00aaff; cursor: pointer; transition: transform 0.2s; }
    .logo:hover { transform: scale(1.05); }
    .nav-links { list-style: none; display: flex; gap: 30px; margin: 0; padding: 0; }
    .nav-links li a { text-decoration: none; color: #333; font-weight: bold; font-size: 18px; transition: color 0.2s; }
    .nav-links li a:hover { color: #00aaff; }

    /* 호텔 검색 박스 */
    .search-box {
      display: flex;
      gap: 15px;
      justify-content: center;
      align-items: center;
      padding: 30px 0;
      background: #ffffff;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin: 20px;
      border-radius: 15px;
      flex-wrap: wrap;
    }
    .search-box input, .search-box select, .search-box button {
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .search-box button {
      background-color: #00aaff;
      color: white;
      border: none;
      cursor: pointer;
      transition: 0.2s;
    }
    .search-box button:hover { background-color: #007acc; }

    /* 호텔 카드 - 1열 세로로 쌓기 */
    .hotel-container {
      display: flex;
      flex-direction: column;  /* 한 줄에 하나씩 */
      gap: 20px;
      padding: 20px 60px;
      overflow-x: hidden;
    }
    .hotel-card {
      width: 100%;
      max-width: 600px;
      margin: 0 auto;  /* 가운데 정렬 */
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      overflow: hidden;
      transition: transform 0.2s;
    }
    .hotel-card:hover { transform: scale(1.02); }
    .hotel-card img { width: 100%; height: 250px; object-fit: cover; }
    .hotel-info { padding: 15px; }
    .hotel-info h3 { margin: 0 0 8px; font-size: 1.2rem; }
    .hotel-info p { margin: 4px 0; color: #555; font-size: 0.9rem; }
    .hotel-controls {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }
    .hotel-controls button {
      background-color: #00aaff;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.85rem;
    }
    .hotel-controls button:hover { background-color: #007acc; }
  </style>
</head>
<body>

  <!-- 네비게이션 -->
  <header>
    <nav class="navbar">
      <div class="logo" onclick="location.href='/'">떠나자</div>
      <ul class="nav-links">
        <li><a href="/">홈</a></li>
        <li><a href="/theme">테마</a></li>
        <li><a href="/region">지역</a></li>
        <li><a href="/flight">항공</a></li>
        <li><a href="/hotel">숙소</a></li>
      </ul>
    </nav>
  </header>

  <!-- 호텔 검색 박스 -->
  <section class="search-box">
    <input type="text" id="cityInput" placeholder="여행지 (예: PAR, SEO)">
    <input type="date" id="checkin" placeholder="체크인" disabled>
    <input type="date" id="checkout" placeholder="체크아웃" disabled>
    <select id="guests" disabled>
      <option value="1">1명</option>
      <option value="2">2명</option>
      <option value="3">3명</option>
      <option value="4">4명</option>
    </select>
    <button onclick="searchHotels()">검색</button>
  </section>

  <!-- 호텔 카드 -->
  <section class="hotel-container" id="hotelContainer">
    <!-- JS에서 호텔 카드 동적으로 생성 -->
  </section>

  <script>
    async function searchHotels() {
      const city = document.getElementById('cityInput').value.trim();
      if (!city) return alert("여행지를 입력해주세요.");

      try {
        const res = await fetch(`/api/hotel?city=${city}`);
        const data = await res.json();

        const container = document.getElementById('hotelContainer');
        container.innerHTML = '';

        if (data.error) {
          container.innerHTML = `<p style="color:red;">${data.error}</p>`;
          return;
        }

        data.forEach(hotel => {
          const card = document.createElement('div');
          card.className = 'hotel-card';
          card.innerHTML = `
            <img src="https://via.placeholder.com/400x250?text=${hotel.hotelName}" alt="${hotel.hotelName}">
            <div class="hotel-info">
              <h3>${hotel.hotelName}</h3>
              <p>체인 코드: ${hotel.chainCode}</p>
              <p>ID: ${hotel.hotelId}</p>
              <div class="hotel-controls">
                <button onclick="alert('예약 기능 준비중')">예약</button>
                <button onclick="alert('자세히 보기 준비중')">자세히</button>
              </div>
            </div>
          `;
          container.appendChild(card);
        });

      } catch (err) {
        console.error(err);
        alert("호텔 정보를 불러오지 못했습니다.");
      }
    }
  </script>

</body>
</html>
